<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" type="text/css" th:href="@{/css/employees.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/css/navbar.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/4.5.0/css/bootstrap.min.css}"/>
	<link rel="stylesheet" type="text/css" th:href="@{/webjars/font-awesome/6.4.0/css/fontawesome.min.css}"/>
	<title>Update Employee</title>
</head>
<body>
	<div class="container">
		<h2>Update Employee</h2>

		<form action="#" th:action="@{/ines/updateEmployee/{id}(id=${employee.id})}" th:object="${employee}"
			method="POST">
			<input type="hidden" th:field="*{id}" />
			<div class="row">
				<div class="col-sm-5">
					<label>First Name</label>
					<input type="text" th:field="*{firstName}"
							   placeholder="First Name" class="form-control col-8 mb-4">

					<label>Last Name</label>
					<input type="text" th:field="*{lastName}"
							   placeholder="Last Name" class="form-control col-8 mb-4">

					<label>Contracted From</label>
						<input type="date" th:field="*{contractedFrom}"
							   placeholder="Contracted From" class="form-control col-8 mb-4">

					<label>Contracted To</label>
						<input type="date" th:field="*{contractedTo}"
							   placeholder="Contracted To" class="form-control col-8 mb-4">
				</div>
			</div>
			<label id="employeeArchive">
				<div class="col-12">
					<div class="row">
						<label>Archive Employee?</label>
						<label>
							<input type="checkbox" name="archived" th:field="*{archived}">
						</label>
						<label id="archiveText">Archiving an Employee removes it from the main employees list.</label>
					</div>
				</div>
			</label>
			<div class="row">
				<div class="col-sm-5">
					<button type="submit" class="btn btn-info col-4">Save Employee</button>
					<button th:href="@{/ines/deleteEmployee/{id}(id=${employee.id})}" title="Delete Employee"
					   data-toggle="modal" class="btn btn-danger col-4" id="deleteEmployeeButton">
						Delete Employee
					</button>
				</div>
			</div>
		</form>
		<hr>
		<a th:href = "@{/ines/employees}"> Back to Employee List</a>
	</div>
	<div class="modal modal-danger" tabindex="-1" role="dialog" id="deleteEmployeeModal">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Confirm Delete Employee</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p><strong>Are you sure you want to delete: [[${employee.name}]]?</strong></p>
					<p>Deleting this employee will delete all associated information connecting to their projects (but not the projects themselves)</p>
				</div>
				<div class="modal-footer">
					<a href="" class="btn btn-primary" id="delRef">Confirm</a>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>


	<script type="text/javascript" th:src="@{/js/jquery-3.6.0.js}"></script>
	<script type="text/javascript" th:src="@{/js/bootstrap/bootstrap.min.js}"></script>
	<script type="text/javascript">
		$('#deleteEmployeeButton').on('click', function(event) {
			event.preventDefault();
			var href = $(this).attr('href');
			$('#deleteEmployeeModal #delRef').attr('href', href);
			$('#deleteEmployeeModal').modal();
 		});
	</script>
</body>
</html>